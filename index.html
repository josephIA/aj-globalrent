<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>AJ GlobalRent & Services</title>
<link rel="icon" href="/static/assets/favicon.png">
<style>
  :root{
    --bg:#ffffff;
    --text:#000000;
    --btn-bg:#000000;
    --btn-text:#ffffff;
    --muted:#555555;
  }
  *{box-sizing:border-box;}
  body{margin:0;font-family:Inter,sans-serif;background:var(--bg);color:var(--text);}
  a{color:inherit;text-decoration:none;}
  header{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #ccc;flex-wrap:wrap;}
  .logo{font-weight:800;font-size:24px;cursor:default;}
  nav{display:flex;gap:8px;flex-wrap:wrap;}
  nav button, nav a{padding:8px 16px;border:none;border-radius:6px;background:var(--btn-bg);color:var(--btn-text);cursor:pointer;}
  .container{max-width:1400px;margin:0 auto;padding:16px;}
  h1,h2{margin-bottom:16px;}
  .filters{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px;}
  .filters input, .filters select{padding:8px;border:1px solid #ccc;border-radius:6px;}
  .filters button{border:none;border-radius:6px;background:var(--btn-bg);color:var(--btn-text);padding:8px 16px;cursor:pointer;}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;}
  .card{border:1px solid #ccc;border-radius:10px;padding:12px;position:relative;}
  .card img{width:100%;border-radius:8px;height:160px;object-fit:cover;}
  .badge{font-size:12px;font-weight:700;padding:2px 6px;border:1px solid var(--text);border-radius:999px;}
  .fav{position:absolute;top:8px;right:8px;font-size:20px;cursor:pointer;}
  button.details{margin-top:8px;padding:6px 12px;border:none;border-radius:6px;background:var(--btn-bg);color:var(--btn-text);cursor:pointer;}
  @media(max-width:768px){ header{flex-direction:column;align-items:flex-start;gap:8px;} }

  /* Modal */
  .modal{position:fixed;inset:0;background: rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:9999;}
  .modal-content{background:#fff;color:#000;padding:24px;border-radius:12px;max-width:600px;width:90%;position:relative;}
  .close{position:absolute;top:8px;right:12px;font-size:20px;cursor:pointer;}
</style>
</head>
<body>

<header>
  <div class="logo">AJ GlobalRent</div>
  <nav id="navButtons">
    <button id="loginBtn">Sign In / Sign Up</button>
    <a href="user-dashboard.html" id="dashboardLink" style="display:none">Dashboard</a>
    <button id="logoutBtn" style="display:none">Sign Out</button>
  </nav>
</header>

<div class="container">
  <h1>Premium Global Rentals — Homes & Services</h1>

  <div class="filters">
    <input type="text" id="q" placeholder="Search listing">
    <select id="state">
      <option value="all">All States</option>
      <option value="CA">California</option>
      <option value="NY">New York</option>
      <option value="TX">Texas</option>
      <option value="FL">Florida</option>
      <option value="IL">Illinois</option>
      <option value="PA">Pennsylvania</option>
      <option value="OH">Ohio</option>
      <option value="GA">Georgia</option>
      <option value="NC">North Carolina</option>
    </select>
    <select id="cat">
      <option value="all">All</option>
      <option value="rent">Rent</option>
      <option value="sale">Sale</option>
      <option value="service">Service</option>
    </select>
    <button onclick="applyFilters()">Search</button>
  </div>

  <div id="listingsGrid" class="grid"></div>
</div>

<!-- Modal -->
<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <div id="modal-body"></div>
  </div>
</div>

<!-- Auth Modal -->
<div id="authModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeAuth()">&times;</span>
    <div id="auth-body">
      <h2 id="authTitle">Sign Up</h2>
      <input type="email" id="authEmail" placeholder="Email" style="width:100%;margin-bottom:8px;padding:8px;">
      <input type="password" id="authPassword" placeholder="Password" style="width:100%;margin-bottom:8px;padding:8px;">
      <button id="authSubmit">Submit</button>
      <p id="switchAuth" style="cursor:pointer;color:blue;margin-top:8px;">Already have an account? Sign In</p>
    </div>
  </div>
</div>

<script>
const SAMPLE = [
  {id:1,title:"Modern Loft California",category:"rent",state:"CA",price:1200,currency:"USD",featured:true,images:["/static/assets/sample1.jpg"],description:"Spacious modern loft in CA."},
  {id:2,title:"Family Home New York",category:"sale",state:"NY",price:450000,currency:"USD",featured:true,images:["/static/assets/sample2.jpg"],description:"Beautiful 3-bedroom home."},
  {id:3,title:"Event Chairs Set",category:"service",state:"TX",price:500,currency:"USD",featured:false,images:["/static/assets/sample3.jpg"],description:"Complete chair set for events."},
  {id:4,title:"Luxury Condo Florida",category:"rent",state:"FL",price:1800,currency:"USD",featured:true,images:["/static/assets/sample4.jpg"],description:"Modern condo in Miami."},
  {id:5,title:"Suburban House Illinois",category:"sale",state:"IL",price:350000,currency:"USD",featured:true,images:["/static/assets/sample5.jpg"],description:"Cozy family house."},
  {id:6,title:"Plumbing Services Pennsylvania",category:"service",state:"PA",price:200,currency:"USD",featured:false,images:["/static/assets/sample6.jpg"],description:"Expert plumbing services."},
  {id:7,title:"Modern Apartment Ohio",category:"rent",state:"OH",price:1300,currency:"USD",featured:false,images:["/static/assets/sample7.jpg"],description:"Apartment near downtown."},
  {id:8,title:"Villa Georgia",category:"sale",state:"GA",price:600000,currency:"USD",featured:false,images:["/static/assets/sample8.jpg"],description:"Luxury villa with pool."},
  {id:9,title:"Electrical Services North Carolina",category:"service",state:"NC",price:250,currency:"USD",featured:false,images:["/static/assets/sample9.jpg"],description:"Reliable electrical services."}
];
localStorage.setItem("sampleListings", JSON.stringify(SAMPLE));

let users = JSON.parse(localStorage.getItem("users")) || [];
let currentUser = JSON.parse(localStorage.getItem("currentUser")) || null;
let favorites = JSON.parse(localStorage.getItem("favorites")) || {};

const navButtons = document.getElementById("navButtons");
const loginBtn = document.getElementById("loginBtn");
const dashboardLink = document.getElementById("dashboardLink");
const logoutBtn = document.getElementById("logoutBtn");

function updateNav(){
  if(currentUser){
    loginBtn.style.display="none";
    dashboardLink.style.display="inline-block";
    logoutBtn.style.display="inline-block";
  }else{
    loginBtn.style.display="inline-block";
    dashboardLink.style.display="none";
    logoutBtn.style.display="none";
  }
}
updateNav();

// Sign out
logoutBtn.onclick=()=>{
  currentUser=null;
  localStorage.removeItem("currentUser");
  updateNav();
  alert("Signed out");
}

// Listings rendering
function renderListings(list){
  const container=document.getElementById("listingsGrid");
  container.innerHTML="";
  list.forEach(item=>{
    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`<img src="${item.images[0]}">
      <h3>${item.title}</h3>
      <p>${item.state} · ${item.category.toUpperCase()}</p>
      <p><strong>${item.currency} ${item.price.toLocaleString()}</strong></p>
      <span class="fav" onclick="toggleFav(event,${item.id})">${isFav(item.id)?"★":"☆"}</span>
      <button class="details" onclick="openModal(${item.id})">View Details</button>`;
    container.appendChild(div);
  });
}
function isFav(id){
  if(!currentUser) return false;
  const list = favorites[currentUser.email] || [];
  return list.includes(id);
}
function toggleFav(e,id){
  e.stopPropagation();
  if(!currentUser){
    openAuth();
    return;
  }
  if(!favorites[currentUser.email]) favorites[currentUser.email]=[];
  const list=favorites[currentUser.email];
  if(list.includes(id)){
    favorites[currentUser.email]=list.filter(x=>x!==id);
  }else{
    list.push(id);
  }
  localStorage.setItem("favorites", JSON.stringify(favorites));
  renderListings(filteredList);
}

// Modal functions
function openModal(id){
  const item=SAMPLE.find(x=>x.id===id);
  const modal=document.getElementById("modal");
  const body=document.getElementById("modal-body");
  body.innerHTML=`<h2>${item.title}</h2>
    <p>${item.state} · ${item.category.toUpperCase()}</p>
    <p>${item.description}</p>
    <p><strong>${item.currency} ${item.price.toLocaleString()}</strong></p>`;
  modal.style.display="flex";
}
function closeModal(){ document.getElementById("modal").style.display="none"; }

// Search/filter
let filteredList = SAMPLE;
function applyFilters(){
  const q=document.getElementById("q").value.toLowerCase();
  const state=document.getElementById("state").value;
  const cat=document.getElementById("cat").value;
  filteredList=SAMPLE.filter(item=>{
    if(cat!=="all" && item.category!==cat) return false;
    if(state!=="all" && item.state!==state) return false;
    if(q && !item.title.toLowerCase().includes(q) && !item.description.toLowerCase().includes(q)) return false;
    return true;
  });
  renderListings(filteredList);
}
window.onload=()=>{ renderListings(SAMPLE); };

// Auth modal
const authModal=document.getElementById("authModal");
const authTitle=document.getElementById("authTitle");
const authEmail=document.getElementById("authEmail");
const authPassword=document.getElementById("authPassword");
const authSubmit=document.getElementById("authSubmit");
const switchAuth=document.getElementById("switchAuth");
let isSignUp=true;

loginBtn.onclick=()=>openAuth();
function openAuth(){ authModal.style.display="flex"; updateAuthForm(); }
function closeAuth(){ authModal.style.display="none"; authEmail.value=""; authPassword.value=""; }
function updateAuthForm(){ 
  authTitle.textContent=isSignUp?"Sign Up":"Sign In"; 
  switchAuth.textContent=isSignUp?"Already have an account? Sign In":"Don't have an account? Sign Up";
}
switchAuth.onclick=()=>{
  isSignUp=!isSignUp; updateAuthForm();
}
authSubmit.onclick=()=>{
  const email=authEmail.value.trim().toLowerCase();
  const pass=authPassword.value;
  if(!email || !pass){ alert("Please fill all fields"); return; }
  if(isSignUp){
    if(users.find(u=>u.email===email)){ alert("Email already exists"); return; }
    const u={email,password:pass}; users.push(u);
    localStorage.setItem("users", JSON.stringify(users));
    currentUser=u;
    localStorage.setItem("currentUser", JSON.stringify(currentUser));
    closeAuth(); updateNav(); alert("Signed up!"); renderListings(filteredList);
  }else{
    const u=users.find(u=>u.email===email && u.password===pass);
    if(!u){ alert("Invalid credentials"); return; }
    currentUser=u;
    localStorage.setItem("currentUser", JSON.stringify(currentUser));
    closeAuth(); updateNav(); alert("Signed in!"); renderListings(filteredList);
  }
}
</script>
</body>
</html>
